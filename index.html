<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PlayHoods Match Scheduler</title>

<style>
:root{
  --bd:#ddd; --muted:#555; --danger:#b00020; --ok:#0b6b0b;
}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  margin:24px; color:#111;
}
h1{ margin:0 0 14px; font-size:20px; }

.card{ border:1px solid var(--bd); border-radius:12px; padding:14px; }
.sectionTitle{ font-weight:900; margin:0 0 8px; }
.sectionTitle.big{ font-size:18px; }

.row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
label{ font-weight:800; margin:10px 0 6px; display:block; }

input[type="text"], input[type="date"], select{
  padding:10px; font-size:14px; border:1px solid #ccc;
  border-radius:10px; width:100%;
}
.row > input, .row > select{ flex:1; min-width:220px; }

button{
  padding:10px 14px; font-size:14px;
  border-radius:10px; cursor:pointer;
}
button.primary{ background:#111; color:#fff; border:1px solid #111; }
button.secondary{ background:#fff; border:1px solid #ccc; }
button:disabled{ opacity:.5; }

.layout{
  display:grid; grid-template-columns:1.3fr .7fr;
  gap:16px; margin-top:16px;
}
@media(max-width:980px){ .layout{ grid-template-columns:1fr; } }

.topPanel{
  display:grid; grid-template-columns:.8fr 1.2fr;
  gap:16px;
}
@media(max-width:980px){ .topPanel{ grid-template-columns:1fr; } }

.courtsCard{
  border:2px solid #111; border-radius:12px; padding:14px;
}

.list{
  border:1px solid #eee; border-radius:10px;
  padding:10px; max-height:380px; overflow:auto;
}
.item{
  display:flex; justify-content:space-between;
  padding:8px 4px; border-bottom:1px dashed #eee;
}
.item:last-child{ border-bottom:none; }
.checkboxRow{ display:flex; gap:12px; align-items:center; }
.checkboxRow input{ transform:scale(1.1); }

.small{ font-size:13px; color:var(--muted); }
.ok{ color:var(--ok); font-weight:800; }
.warn{ color:var(--danger); font-weight:800; }

.pairItem{ display:flex; gap:10px; margin:6px 0; }

.resultHeader{
  font-size:18px; font-weight:900; margin-bottom:10px;
}

table{ width:100%; border-collapse:collapse; margin-top:10px; }
th,td{ border:1px solid var(--bd); padding:8px; }
th{ background:#f6f6f6; }
</style>
</head>

<body>
<h1>PlayHoods Match Scheduler</h1>

<!-- Date / Time -->
<div class="card">
  <div class="row">
    <div style="flex:1">
      <label>Date</label>
      <input id="sessionDate" type="date">
    </div>
    <div style="flex:1">
      <label>Time</label>
      <select id="sessionTime"></select>
    </div>
  </div>
</div>

<div class="layout">
  <!-- LEFT -->
  <div class="card">
    <div class="topPanel">
      <!-- Courts -->
      <div class="courtsCard">
        <div class="sectionTitle big">Courts</div>
        <div id="courtList" class="list"></div>
      </div>

      <!-- Roster -->
      <div>
        <div class="sectionTitle">Roster</div>
        <div id="rosterList" class="list"></div>
      </div>
    </div>

    <!-- Fixed Partners -->
    <label style="margin-top:14px;">Fixed Partners</label>
    <div class="row">
      <select id="p1"></select>
      <select id="p2"></select>
      <button class="secondary" id="addPairBtn">Add Pair</button>
    </div>
    <div id="pairsBox" class="small"></div>

    <!-- Validation -->
    <label style="margin-top:14px;">Validation</label>
    <div class="small">
      <span id="selPlayersCount">0</span> players 路
      <span id="selCourtsCount">0</span> courts 路
      Need <strong id="requiredPlayers">0</strong> players
    </div>
    <div id="validationMsg" class="small"></div>

    <!-- Generate -->
    <div class="row" style="margin-top:14px;">
      <button id="generateBtn" class="primary" disabled>Generate Schedule</button>
    </div>
    <div id="status" class="small"></div>
  </div>

  <!-- RIGHT -->
  <div class="card">
    <div class="sectionTitle">Library</div>
    <label>Add Player</label>
    <div class="row">
      <input id="rosterAdd" type="text">
      <button id="rosterAddBtn" class="secondary">Add</button>
    </div>

    <label style="margin-top:12px;">Add Court</label>
    <div class="row">
      <input id="courtAdd" type="text">
      <button id="courtAddBtn" class="secondary">Add</button>
    </div>

    <div class="row" style="margin-top:12px;">
      <button id="rosterClearBtn" class="secondary">Clear Roster</button>
      <button id="courtClearBtn" class="secondary">Clear Courts</button>
    </div>
  </div>
</div>

<!-- Output -->
<div class="card" style="margin-top:16px;">
  <div class="sectionTitle">Schedule</div>
  <div id="output" class="small">No schedule generated.</div>
</div>

<script>
/* ---------- Time options ---------- */
(function(){
  const sel=document.getElementById("sessionTime");
  for(let h=8,m=30;;){
    const hh=String(h).padStart(2,"0");
    const mm=String(m).padStart(2,"0");
    sel.innerHTML+=`<option>${hh}:${mm}</option>`;
    m+=30; if(m>=60){ m=0; h++; }
    if(h===21 && m===30) break;
  }
})();

/* ---------- Simple demo logic ---------- */
const roster=["Echo","Gillian","Jane","Lisa","Michele","Sandie","Sonia","Tao","Teng","Tina","Veronika","Nancy"];
const courts=["CRT10","CRT11","CRT12","CRT13"];
const selectedPlayers=new Set(), selectedCourts=new Set();
const fixedPairs=[];

function renderList(arr, boxId, selSet){
  const box=document.getElementById(boxId);
  box.innerHTML=arr.map(n=>`
    <div class="item">
      <label class="checkboxRow">
        <input type="checkbox" ${selSet.has(n)?"checked":""}
          onchange="${boxId==='rosterList'?
            `togglePlayer('${n}')`:`toggleCourt('${n}')`}">
        ${n}
      </label>
    </div>`).join("");
}

window.togglePlayer=n=>{
  selectedPlayers.has(n)?selectedPlayers.delete(n):selectedPlayers.add(n);
  validate();
};
window.toggleCourt=n=>{
  selectedCourts.has(n)?selectedCourts.delete(n):selectedCourts.add(n);
  validate();
};

function validate(){
  document.getElementById("selPlayersCount").textContent=selectedPlayers.size;
  document.getElementById("selCourtsCount").textContent=selectedCourts.size;
  const need=selectedCourts.size*4;
  document.getElementById("requiredPlayers").textContent=need;
  const ok=need>0 && selectedPlayers.size===need;
  document.getElementById("generateBtn").disabled=!ok;
  document.getElementById("validationMsg").innerHTML=
    ok?`<span class="ok">Ready</span>`:`<span class="warn">Invalid</span>`;
}

document.getElementById("generateBtn").onclick=()=>{
  const d=sessionDate.value, t=sessionTime.value;
  output.innerHTML=`
    <div class="resultHeader">
      ${d} 路 ${t} 路 Courts: ${[...selectedCourts].join(", ")}
    </div>
    <div>Schedule generated (demo).</div>`;
};

renderList(roster,"rosterList",selectedPlayers);
renderList(courts,"courtList",selectedCourts);
</script>
</body>
</html>
